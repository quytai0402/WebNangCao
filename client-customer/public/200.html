<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <base href="/" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Web site created using create-react-app" />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <title>Florista Flowers</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>

    <!-- Multi-Chat Widget (Zalo & Messenger) -->
    <div class="multi-chat-widget" id="multiChatWidget">
      <!-- Main Button -->
      <div class="chat-main-button" id="chatMainButton">
        <div class="chat-button-circle">
          <i class="chat-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 512 512"
              fill="#ffffff"
            >
              <path d="M256 32C114.6 32 0 125.1 0 240c0 47.6 19.9 91.2 52.9 126.3C38 405.7 7 439.1 6.5 439.5c-6.6 7-8.4 17.2-4.6 26S14.4 480 24 480c61.5 0 110-25.7 139.1-46.3C192 442.8 223.2 448 256 448c141.4 0 256-93.1 256-208S397.4 32 256 32zm0 368c-26.7 0-53.1-4.1-78.4-12.1l-22.7-7.2-19.5 13.8c-14.3 10.1-33.9 21.4-57.5 29 7.3-12.1 14.4-25.7 19.9-40.2l10.6-28.1-20.6-21.8C69.7 314.1 48 282.2 48 240c0-88.2 93.3-160 208-160s208 71.8 208 160-93.3 160-208 160z" />
            </svg>
          </i>
        </div>
      </div>

      <!-- Child Buttons -->
      <div class="chat-child-buttons" id="chatChildButtons">
        <!-- Trợ lý ảo Button -->
        <div id="assistantButton" class="child-button assistant-button">
          <div class="child-button-circle assistant-circle">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 640 512"
              fill="#ffffff"
            >
              <path d="M320 0c17.7 0 32 14.3 32 32V96H472c39.8 0 72 32.2 72 72V440c0 39.8-32.2 72-72 72H168c-39.8 0-72-32.2-72-72V168c0-39.8 32.2-72 72-72H288V32c0-17.7 14.3-32 32-32zM168 128c-22.1 0-40 17.9-40 40v48h96V128H168zm136 0H208v88h96V128zm-96 216h96V256H208v88zm136 0h96V256H344v88zm96-128H344v48h96V216zm0-88V128H344v48h96zM168 256c-22.1 0-40 17.9-40 40v144c0 22.1 17.9 40 40 40H472c22.1 0 40-17.9 40-40V296c0-22.1-17.9-40-40-40H168z" />
            </svg>
          </div>
          <span class="child-button-label">Trợ lý ảo</span>
        </div>

        <!-- Zalo Button -->
        <a
          href="https://chat.zalo.me/?phone=0972898369"
          id="linkzalo"
          target="_blank"
          rel="noopener noreferrer"
          class="child-button zalo-button"
        >
          <div class="child-button-circle">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 460.1 436.6"
            >
              <path
                fill="#ffffff"
                class="st0"
                d="M82.6 380.9c-1.8-.8-3.1-1.7-1-3.5 1.3-1 2.7-1.9 4.1-2.8 13.1-8.5 25.4-17.8 33.5-31.5 6.8-11.4 5.7-18.1-2.8-26.5C69 269.2 48.2 212.5 58.6 145.5 64.5 107.7 81.8 75 107 46.6c15.2-17.2 33.3-31.1 53.1-42.7 1.2-.7 2.9-.9 3.1-2.7-.4-1-1.1-.7-1.7-.7-33.7 0-67.4-.7-101 .2C28.3 1.7.5 26.6.6 62.3c.2 104.3 0 208.6 0 313 0 32.4 24.7 59.5 57 60.7 27.3 1.1 54.6.2 82 .1 2 .1 4 .2 6 .2H290c36 0 72 .2 108 0 33.4 0 60.5-27 60.5-60.3v-.6-58.5c0-1.4.5-2.9-.4-4.4-1.8.1-2.5 1.6-3.5 2.6-19.4 19.5-42.3 35.2-67.4 46.3-61.5 27.1-124.1 29-187.6 7.2-5.5-2-11.5-2.2-17.2-.8-8.4 2.1-16.7 4.6-25 7.1-24.4 7.6-49.3 11-74.8 6zm72.5-168.5c1.7-2.2 2.6-3.5 3.6-4.8 13.1-16.6 26.2-33.2 39.3-49.9 3.8-4.8 7.6-9.7 10-15.5 2.8-6.6-.2-12.8-7-15.2-3-.9-6.2-1.3-9.4-1.1-17.8-.1-35.7-.1-53.5 0-2.5 0-5 .3-7.4.9-5.6 1.4-9 7.1-7.6 12.8 1 3.8 4 6.8 7.8 7.7 2.4.6 4.9.9 7.4.8 10.8.1 21.7 0 32.5.1 1.2 0 2.7-.8 3.6 1-.9 1.2-1.8 2.4-2.7 3.5-15.5 19.6-30.9 39.3-46.4 58.9-3.8 4.9-5.8 10.3-3 16.3s8.5 7.1 14.3 7.5c4.6.3 9.3.1 14 .1 16.2 0 32.3.1 48.5-.1 8.6-.1 13.2-5.3 12.3-13.3-.7-6.3-5-9.6-13-9.7-14.1-.1-28.2 0-43.3 0zm116-52.6c-12.5-10.9-26.3-11.6-39.8-3.6-16.4 9.6-22.4 25.3-20.4 43.5 1.9 17 9.3 30.9 27.1 36.6 11.1 3.6 21.4 2.3 30.5-5.1 2.4-1.9 3.1-1.5 4.8.6 3.3 4.2 9 5.8 14 3.9 5-1.5 8.3-6.1 8.3-11.3.1-20 .2-40 0-60-.1-8-7.6-13.1-15.4-11.5-4.3.9-6.7 3.8-9.1 6.9zm69.3 37.1c-.4 25 20.3 43.9 46.3 41.3 23.9-2.4 39.4-20.3 38.6-45.6-.8-25-19.4-42.1-44.9-41.3-23.9.7-40.8 19.9-40 45.6zm-8.8-19.9c0-15.7.1-31.3 0-47 0-8-5.1-13-12.7-12.9-7.4.1-12.3 5.1-12.4 12.8-.1 4.7 0 9.3 0 14v79.5c0 6.2 3.8 11.6 8.8 12.9 6.9 1.9 14-2.2 15.8-9.1.3-1.2.5-2.4.4-3.7.2-15.5.1-31 .1-46.5z"
              ></path>
            </svg>
          </div>
          <span class="child-button-label">Zalo</span>
        </a>

        <!-- Messenger Button -->
        <a
          href="https://m.me/TranQuyTaii"
          target="_blank"
          rel="noopener noreferrer"
          class="child-button messenger-button"
        >
          <div class="child-button-circle">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 800">
              <path
                d="M400 0C174.7 0 0 165.1 0 388c0 116.6 47.8 217.4 125.6 287 6.5 5.8 10.5 14 10.7 22.8l2.2 71.2a32 32 0 0 0 44.9 28.3l79.4-35c6.7-3 14.3-3.5 21.4-1.6 36.5 10 75.3 15.4 115.8 15.4 225.3 0 400-165.1 400-388S625.3 0 400 0z"
                fill="#ffffff"
              />
              <path
                d="M159.8 501.5l117.5-186.4a60 60 0 0 1 86.8-16l93.5 70.1a24 24 0 0 0 28.9-.1l126.2-95.8c16.8-12.8 38.8 7.4 27.6 25.3L522.7 484.9a60 60 0 0 1-86.8 16l-93.5-70.1a24 24 0 0 0-28.9.1l-126.2 95.8c-16.8 12.8-38.8-7.3-27.5-25.2z"
                fill="#0068ff"
              />
            </svg>
          </div>
          <span class="child-button-label">Messenger</span>
        </a>
      </div>
    </div>

    <style>
      /* Multi-Chat Widget Styles */
      .multi-chat-widget {
          position: fixed;
          bottom: 40px; /* Tăng khoảng cách từ dưới lên */
          right: 40px; /* Tăng khoảng cách từ phải sang */
          z-index: 9999;
      }

      /* Main Button */
      .chat-main-button {
          width: 65px; /* Tăng kích thước nút chính */
          height: 65px;
          cursor: pointer;
          z-index: 2;
          transition: transform 0.3s;
      }

      .chat-button-circle {
          width: 65px; /* Tăng kích thước hình tròn */
          height: 65px;
          background: linear-gradient(135deg, #3b82f6, #0060f0);
          border-radius: 50%;
          box-shadow: 0 6px 16px rgba(0, 104, 255, 0.4);
          display: flex;
          justify-content: center;
          align-items: center;
          position: relative;
          transition: all 0.3s;
      }

      .chat-button-circle:hover {
          transform: scale(1.1);
          background: linear-gradient(135deg, #4a8af9, #0052d6);
      }

      .chat-button-circle::before {
          content: '';
          position: absolute;
          width: 100%;
          height: 100%;
          border-radius: 50%;
          border: 2px solid rgba(0, 104, 255, 0.4);
          animation: ripple 1.8s linear infinite;
      }

      @keyframes ripple {
          0% {
              transform: scale(1);
              opacity: 0.3;
          }
          100% {
              transform: scale(1.6);
              opacity: 0;
          }
      }

      .chat-icon {
          width: 35px; /* Tăng kích thước icon */
          height: 35px;
          display: flex;
      }
      
      /* Child Buttons */
      .chat-child-buttons {
          position: absolute;
          bottom: 80px; /* Điều chỉnh vị trí */
          right: 5px;
          display: flex;
          flex-direction: column;
          align-items: flex-end;
          gap: 15px;
          opacity: 0;
          visibility: hidden;
          transform: translateY(20px);
          transition: all 0.3s ease;
      }
      
      .chat-child-buttons.active {
          opacity: 1;
          visibility: visible;
          transform: translateY(0);
      }
      
      .child-button {
          display: flex;
          align-items: center;
          text-decoration: none;
      }
      
      .child-button-circle {
          width: 50px;
          height: 50px;
          border-radius: 50%;
          background: linear-gradient(135deg, #3b82f6, #0060f0);
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
          transition: transform 0.3s;
      }
      
      .child-button-circle svg {
          width: 28px;
          height: 28px;
      }
      
      .child-button-label {
          background-color: white;
          padding: 8px 15px;
          border-radius: 6px;
          margin-right: 15px;
          box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
          font-family: 'Playfair Display', Arial, sans-serif;
          font-size: 15px;
          color: #3b82f6;
          order: -1;
          opacity: 0;
          transform: translateX(10px);
          transition: all 0.3s;
      }
      
      .child-button:hover .child-button-circle {
          transform: scale(1.1);
      }
      
      .child-button:hover .child-button-label {
          opacity: 1;
          transform: translateX(0);
      }
      
      /* Nút trợ lý có cursor pointer */
      .assistant-button {
          cursor: pointer;
      }
    </style>

    <script>
        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
            document.getElementById("linkzalo").href = "https://zalo.me/0972898369";
        }

        // Biến lưu trạng thái của UI
        let chatbotWindowOpen = false;
        let childButtonsActive = false;

        // Lắng nghe sự kiện từ React để đồng bộ trạng thái
        window.addEventListener('message', function(event) {
            if (event.data && event.data.type === 'CHATBOT_STATE_CHANGE') {
                chatbotWindowOpen = event.data.isOpen;
                
                // Nếu chatbot mở, ẩn các nút con
                if (chatbotWindowOpen) {
                    toggleChildButtons(false);
                }
            }
        });
        
        // Hàm hiển thị/ẩn các nút con
        function toggleChildButtons(show) {
            const childButtons = document.getElementById('chatChildButtons');
            if (!childButtons) return;
            
            childButtonsActive = show;
            
            if (show) {
                childButtons.classList.add('active');
            } else {
                childButtons.classList.remove('active');
            }
        }

        // Thêm sự kiện click cho nút chính
        document.addEventListener('DOMContentLoaded', function() {
            const chatMainButton = document.getElementById('chatMainButton');
            const assistantButton = document.getElementById('assistantButton');
            
            if (chatMainButton) {
                chatMainButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    // Nếu chatbot đang mở, đóng nó
                    if (chatbotWindowOpen) {
                        window.postMessage(
                            { type: 'TOGGLE_CHATBOT' },
                            window.location.origin
                        );
                        return;
                    }
                    
                    // Nếu không, toggle hiển thị các nút con
                    toggleChildButtons(!childButtonsActive);
                });
            }
            
            // Thêm sự kiện click cho nút trợ lý ảo
            if (assistantButton) {
                assistantButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    // Ẩn các nút con
                    toggleChildButtons(false);
                    
                    // Mở chatbot
                    window.postMessage(
                        { type: 'TOGGLE_CHATBOT' },
                        window.location.origin
                    );
                });
            }
            
            // Ẩn menu khi click ra ngoài
            document.addEventListener('click', function() {
                if (childButtonsActive) {
                    toggleChildButtons(false);
                }
            });
            
            // Ngăn sự kiện nổi bọt từ các nút con
            const childButtons = document.querySelectorAll('.child-button');
            childButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                });
            });
        });
    </script>
  </body>
</html>
